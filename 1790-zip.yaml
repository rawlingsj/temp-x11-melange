# Generated from https://git.alpinelinux.org/aports/plain/main/zip/APKBUILD
package:
    name: zip
    version: 3.0
    epoch: 0
    description: Creates PKZIP-compatible .zip files
    target-architecture:
        - all
    copyright:
        - paths:
              - "*"
          attestation: TODO
          license: Info-ZIP
environment:
    contents:
        repositories:
            - https://packages.wolfi.dev/bootstrap/stage3
            - https://packages.wolfi.dev/os
            - /work/packages
        keyring:
            - https://packages.wolfi.dev/bootstrap/stage3/wolfi-signing.rsa.pub
            - https://packages.wolfi.dev/os/wolfi-signing.rsa.pub
        packages:
            - busybox
            - ca-certificates-bundle
            - build-base
            # - automake
            # - autoconf
pipeline:
    - uses: fetch
      with:
          expected-sha256: f0e8bb1f9b7eb0b01285495a2699df3a4b766784c1765a8f1aeedf63c0806369
          uri: https://sourceforge.net/projects/infozip/files/Zip%203.x%20%28latest%29/${{package.version}}/zip30.tar.gz
    - runs: make -f unix/Makefile LOCAL_ZIP="${CFLAGS} ${CPPFLAGS}" prefix=/usr generic
    - runs: make -f unix/Makefile prefix=${{targets.destdir}}/usr MANDIR=/usr/share/man install
    # - uses: autoconf/make
    #   with:
    #       dir: unix
    # - uses: autoconf/make-install
    #   with:
    #       dir: unix
# subpackages:
#     - name: zip-doc
#       pipeline:
#           - uses: split/manpages
#       description: zip manpages
